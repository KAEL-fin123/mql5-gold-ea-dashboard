# ğŸš€ ç°ä»£åŒ–MQL5 EAæ¦œå•é¡¹ç›® - é…ç½®æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°
åŸºäºæŠ€æœ¯è¯„ä¼°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨2025å¹´æœ€æ–°çš„æŠ€æœ¯æ ˆæ¥æ„å»ºè¿™ä¸ªé¡¹ç›®ã€‚

## ğŸ”§ ç°ä»£åŒ–æŠ€æœ¯æ ˆï¼ˆ2025ç‰ˆï¼‰

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
```json
{
  "å‰ç«¯æ¡†æ¶": "Next.js 15.1 + React 19",
  "å¼€å‘è¯­è¨€": "TypeScript 5.7+",
  "æ ·å¼ç³»ç»Ÿ": "Tailwind CSS 3.4 + shadcn/ui",
  "è¡¨å•ç®¡ç†": "React Hook Form + Zod",
  "æ•°æ®è·å–": "TanStack Query v5",
  "çŠ¶æ€ç®¡ç†": "Zustand (è½»é‡çº§)",
  "åç«¯æœåŠ¡": "Supabase (PostgreSQL + Auth)",
  "éƒ¨ç½²å¹³å°": "Vercel",
  "åŒ…ç®¡ç†å™¨": "pnpm (æ›´å¿«æ›´é«˜æ•ˆ)"
}
```

## ğŸ“ é…ç½®ä¿¡æ¯æ”¶é›†æ¸…å•ï¼ˆä¼˜åŒ–ç‰ˆï¼‰

### ğŸš¨ ç¬¬ä¸€ä¼˜å…ˆçº§ - æ ¸å¿ƒè´¦æˆ·é…ç½®

#### 1. GitHubé…ç½®ï¼ˆå¿…éœ€ï¼‰
```yaml
éœ€è¦ä¿¡æ¯:
  - GitHubç”¨æˆ·å: ________________
  - GitHubé‚®ç®±: ________________
  - ä»“åº“åç§°: mql5-gold-ea-dashboard
  - ä»“åº“ç±»å‹: Private
  - é»˜è®¤åˆ†æ”¯: main

è·å–æ­¥éª¤:
  1. è®¿é—® github.com
  2. åˆ›å»ºæ–°ä»“åº“
  3. è®°å½•ä»“åº“URL
```

#### 2. Supabaseé…ç½®ï¼ˆå¿…éœ€ï¼‰
```yaml
éœ€è¦ä¿¡æ¯:
  - é¡¹ç›®åç§°: mql5-gold-ea-dashboard
  - æ•°æ®åº“å¯†ç : ________________ (è¯·è®¾ç½®å¼ºå¯†ç )
  - é¡¹ç›®URL: ________________
  - anon key: ________________
  - service_role key: ________________

è·å–æ­¥éª¤:
  1. è®¿é—® supabase.com
  2. ä½¿ç”¨GitHubç™»å½•
  3. åˆ›å»ºæ–°é¡¹ç›®
  4. åœ¨Settings > APIä¸­è·å–å¯†é’¥
```

#### 3. Vercelé…ç½®ï¼ˆå¿…éœ€ï¼‰
```yaml
éœ€è¦ä¿¡æ¯:
  - Vercelè´¦æˆ·: ä½¿ç”¨GitHubç™»å½•
  - é¡¹ç›®åç§°: mql5-gold-ea-dashboard
  - éƒ¨ç½²åˆ†æ”¯: main

è·å–æ­¥éª¤:
  1. è®¿é—® vercel.com
  2. ä½¿ç”¨GitHubç™»å½•
  3. æˆæƒè®¿é—®ä»“åº“
```

### âš¡ ç¬¬äºŒä¼˜å…ˆçº§ - å¼€å‘ç¯å¢ƒé…ç½®

#### 4. æœ¬åœ°å¼€å‘ç¯å¢ƒ
```yaml
éœ€è¦å®‰è£…:
  - Node.js: 20.x LTS (æœ€æ–°ç¨³å®šç‰ˆ)
  - pnpm: æœ€æ–°ç‰ˆæœ¬
  - Git: å·²å®‰è£…åœ¨ D:\Program Files\Git
  - VS Code: æ¨èç¼–è¾‘å™¨

ç¯å¢ƒå˜é‡é…ç½®:
  - NEXT_PUBLIC_SUPABASE_URL
  - NEXT_PUBLIC_SUPABASE_ANON_KEY
  - SUPABASE_SERVICE_ROLE_KEY
  - ADMIN_SECRET_KEY (è‡ªå®šä¹‰å¼ºå¯†ç )
```

## ğŸ› ï¸ æ¸è¿›å¼å®æ–½æ–¹æ¡ˆï¼ˆæ–°æ‰‹å‹å¥½ï¼‰

### é˜¶æ®µ1: åŸºç¡€ç¯å¢ƒæ­å»ºï¼ˆDay 1-3ï¼‰

#### Day 1: è´¦æˆ·åˆ›å»ºå’Œé…ç½®
- [ ] åˆ›å»ºGitHubä»“åº“
- [ ] åˆ›å»ºSupabaseé¡¹ç›®
- [ ] åˆ›å»ºVercelè´¦æˆ·
- [ ] è®°å½•æ‰€æœ‰å¯†é’¥å’ŒURL

#### Day 2: æœ¬åœ°ç¯å¢ƒå‡†å¤‡
- [ ] å®‰è£…Node.js 20.x LTS
- [ ] å®‰è£…pnpm: `npm install -g pnpm`
- [ ] é…ç½®Gitç”¨æˆ·ä¿¡æ¯
- [ ] å…‹éš†ä»“åº“åˆ°æœ¬åœ°

#### Day 3: é¡¹ç›®åˆå§‹åŒ–
- [ ] ä½¿ç”¨ç°ä»£åŒ–è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®
- [ ] é…ç½®TypeScriptå’ŒESLint
- [ ] å®‰è£…shadcn/uiç»„ä»¶åº“
- [ ] é…ç½®ç¯å¢ƒå˜é‡

### é˜¶æ®µ2: æ•°æ®åº“è®¾è®¡ï¼ˆDay 4-5ï¼‰

#### ä¼˜åŒ–åçš„æ•°æ®åº“ç»“æ„
```sql
-- 1. EAåŸºç¡€ä¿¡æ¯è¡¨ï¼ˆå¢å¼ºç‰ˆï¼‰
CREATE TABLE eas (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name TEXT NOT NULL UNIQUE,
    logo_url TEXT,
    description TEXT,
    is_active BOOLEAN DEFAULT true,
    is_featured BOOLEAN DEFAULT false,
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    deleted_at TIMESTAMP WITH TIME ZONE
);

-- 2. EAç»Ÿè®¡æ•°æ®è¡¨ï¼ˆå¢å¼ºç‰ˆï¼‰
CREATE TABLE ea_stats (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    ea_id UUID REFERENCES eas(id) ON DELETE CASCADE,
    year INTEGER NOT NULL CHECK (year >= 2020 AND year <= 2030),
    month INTEGER CHECK (month >= 1 AND month <= 12),
    win_rate DECIMAL(5,2) CHECK (win_rate >= 0 AND win_rate <= 100),
    drawdown DECIMAL(8,4) CHECK (drawdown >= 0),
    avg_risk_reward DECIMAL(8,4),
    max_risk_reward DECIMAL(8,4),
    annual_return DECIMAL(8,4),
    monthly_return DECIMAL(8,4),
    total_trades INTEGER DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    -- å¤åˆå”¯ä¸€çº¦æŸ
    UNIQUE(ea_id, year, month)
);

-- 3. ç”¨æˆ·å»ºè®®è¡¨ï¼ˆå¢å¼ºç‰ˆï¼‰
CREATE TABLE user_requests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    ea_name TEXT NOT NULL,
    ea_link TEXT,
    user_ip INET NOT NULL,
    user_agent TEXT,
    status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'reviewed', 'implemented')),
    admin_notes TEXT,
    submitted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 4. å¹¿å‘Šé…ç½®è¡¨ï¼ˆå¢å¼ºç‰ˆï¼‰
CREATE TABLE ads (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    position TEXT NOT NULL CHECK (position IN ('left', 'right', 'footer', 'header')),
    image_url TEXT NOT NULL,
    link_url TEXT NOT NULL,
    is_active BOOLEAN DEFAULT true,
    start_date TIMESTAMP WITH TIME ZONE,
    end_date TIMESTAMP WITH TIME ZONE,
    click_count INTEGER DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 5. ç³»ç»Ÿé…ç½®è¡¨ï¼ˆæ–°å¢ï¼‰
CREATE TABLE system_config (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    config_key TEXT NOT NULL UNIQUE,
    config_value JSONB NOT NULL,
    description TEXT,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
CREATE INDEX idx_ea_stats_ea_id ON ea_stats(ea_id);
CREATE INDEX idx_ea_stats_year_month ON ea_stats(year, month);
CREATE INDEX idx_ea_stats_win_rate ON ea_stats(win_rate DESC);
CREATE INDEX idx_ea_stats_drawdown ON ea_stats(drawdown ASC);
CREATE INDEX idx_ea_stats_annual_return ON ea_stats(annual_return DESC);
CREATE INDEX idx_user_requests_ip_date ON user_requests(user_ip, DATE(submitted_at));
CREATE INDEX idx_ads_position_active ON ads(position, is_active);
CREATE INDEX idx_eas_active_featured ON eas(is_active, is_featured);

-- åˆ›å»ºè§†å›¾ç®€åŒ–æŸ¥è¯¢
CREATE VIEW ea_rankings AS
SELECT 
    e.id,
    e.name,
    e.logo_url,
    e.description,
    e.is_featured,
    s.win_rate,
    s.drawdown,
    s.avg_risk_reward,
    s.max_risk_reward,
    s.annual_return,
    s.monthly_return,
    s.year,
    s.month
FROM eas e
LEFT JOIN ea_stats s ON e.id = s.ea_id
WHERE e.is_active = true AND e.deleted_at IS NULL;
```

### é˜¶æ®µ3: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆDay 6-15ï¼‰

#### ç°ä»£åŒ–ç»„ä»¶æ¶æ„
```typescript
// 1. ç±»å‹å®šä¹‰ (types/index.ts)
export interface EA {
  id: string;
  name: string;
  logo_url?: string;
  description?: string;
  is_featured: boolean;
}

export interface EAStats {
  id: string;
  ea_id: string;
  year: number;
  month?: number;
  win_rate: number;
  drawdown: number;
  avg_risk_reward: number;
  max_risk_reward: number;
  annual_return: number;
  monthly_return: number;
}

// 2. APIå®¢æˆ·ç«¯ (lib/supabase.ts)
import { createClient } from '@supabase/supabase-js';

export const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

// 3. æ•°æ®è·å–é’©å­ (hooks/useEARankings.ts)
import { useQuery } from '@tanstack/react-query';

export function useEARankings(rankingType: string) {
  return useQuery({
    queryKey: ['ea-rankings', rankingType],
    queryFn: () => fetchEARankings(rankingType),
    staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿç¼“å­˜
  });
}
```

### é˜¶æ®µ4: å®‰å…¨æ€§å’Œæ€§èƒ½ä¼˜åŒ–ï¼ˆDay 16-18ï¼‰

#### å®‰å…¨æ€§é…ç½®
```typescript
// 1. è¾“å…¥éªŒè¯ (lib/validation.ts)
import { z } from 'zod';

export const userRequestSchema = z.object({
  ea_name: z.string().min(1).max(100),
  ea_link: z.string().url().optional(),
});

// 2. é€Ÿç‡é™åˆ¶ (middleware.ts)
import { NextRequest, NextResponse } from 'next/server';
import { Ratelimit } from '@upstash/ratelimit';

const ratelimit = new Ratelimit({
  redis: /* Redisé…ç½® */,
  limiter: Ratelimit.slidingWindow(10, '1 m'),
});

// 3. CORSé…ç½® (next.config.js)
const nextConfig = {
  async headers() {
    return [
      {
        source: '/api/:path*',
        headers: [
          { key: 'Access-Control-Allow-Origin', value: 'https://yourdomain.com' },
          { key: 'Access-Control-Allow-Methods', value: 'GET, POST, PUT, DELETE' },
        ],
      },
    ];
  },
};
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. å›¾ç‰‡ä¼˜åŒ–
```typescript
// ä½¿ç”¨Next.js Imageç»„ä»¶
import Image from 'next/image';

<Image
  src={ea.logo_url}
  alt={ea.name}
  width={64}
  height={64}
  className="rounded-lg"
  loading="lazy"
  placeholder="blur"
  blurDataURL="data:image/jpeg;base64,..."
/>
```

### 2. æ•°æ®ç¼“å­˜ç­–ç•¥
```typescript
// 1. æœåŠ¡ç«¯ç¼“å­˜
export const revalidate = 300; // 5åˆ†é’Ÿé‡æ–°éªŒè¯

// 2. å®¢æˆ·ç«¯ç¼“å­˜
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000,
      cacheTime: 10 * 60 * 1000,
    },
  },
});
```

### 3. ä»£ç åˆ†å‰²
```typescript
// åŠ¨æ€å¯¼å…¥å¤§å‹ç»„ä»¶
const EADetailModal = dynamic(() => import('./EADetailModal'), {
  loading: () => <Skeleton className="h-96 w-full" />,
});
```

## ğŸ” ç›‘æ§å’Œåˆ†æé…ç½®

### 1. é”™è¯¯ç›‘æ§
```typescript
// é”™è¯¯è¾¹ç•Œç»„ä»¶
export function ErrorBoundary({ children }: { children: React.ReactNode }) {
  return (
    <ErrorBoundaryProvider
      onError={(error, errorInfo) => {
        console.error('Error caught by boundary:', error, errorInfo);
        // å‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
      }}
    >
      {children}
    </ErrorBoundaryProvider>
  );
}
```

### 2. æ€§èƒ½ç›‘æ§
```typescript
// Web Vitalsç›‘æ§
export function reportWebVitals(metric: any) {
  console.log(metric);
  // å‘é€åˆ°åˆ†ææœåŠ¡
}
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥
- [ ] æ‰€æœ‰ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] æ•°æ®åº“è¡¨å·²åˆ›å»º
- [ ] æµ‹è¯•æ•°æ®å·²å¯¼å…¥
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] TypeScriptç¼–è¯‘æ— é”™è¯¯
- [ ] ESLintæ£€æŸ¥é€šè¿‡

### éƒ¨ç½²åéªŒè¯
- [ ] ç½‘ç«™å¯æ­£å¸¸è®¿é—®
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] APIç«¯ç‚¹å“åº”æ­£ç¡®
- [ ] å›¾ç‰‡åŠ è½½æ­£å¸¸
- [ ] è¡¨å•æäº¤åŠŸèƒ½æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- Lighthouseæ€§èƒ½åˆ†æ•° > 90
- é›¶TypeScripté”™è¯¯
- æµ‹è¯•è¦†ç›–ç‡ > 80%

### ä¸šåŠ¡æŒ‡æ ‡
- ç”¨æˆ·åœç•™æ—¶é—´ > 2åˆ†é’Ÿ
- è·³å‡ºç‡ < 50%
- è¡¨å•æäº¤æˆåŠŸç‡ > 95%
- ç§»åŠ¨ç«¯è®¿é—®å æ¯” > 40%

---

**ä¸‹ä¸€æ­¥**: è¯·ç¡®è®¤æ‚¨å·²å‡†å¤‡å¥½ä¸Šè¿°é…ç½®ä¿¡æ¯ï¼Œæˆ‘å°†å¸®æ‚¨å¼€å§‹é¡¹ç›®çš„å®é™…æ­å»ºå·¥ä½œï¼
